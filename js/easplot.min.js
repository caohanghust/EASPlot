/**
 * @Author:      曹航
 * @DateTime:    2015-05-10 19:11:04
 * @E-mail:      caohanghust@gmail.com
 * @Description: esay and smart ploting
 */
function EASPlot(e){var b=["#CC3333","#99CC00","#003399","#FF6600","#009999","#663399","#990066","#FFCCCC","#FFFF00"];var c=document.getElementById(e);var a=c.getContext("2d");var d=(function(){return{width:c.width,height:c.height,top:c.offsetTop,left:c.offsetLeft,}})();this.drawPie=function(h){var i=(function(){var j=1;if(d.width>d.height){j=0.35*d.height}else{j=0.35*d.width}return{radiu:j,centerx:d.width/2,centery:d.height/2,}})();(function(){a.clearRect(0,0,d.width,d.height);var k=0;var m=[0];var n=[];for(var j=0;j<h.length;j++){k+=h[j][1]}a.shadowOffsetX=5;a.shadowOffsetY=5;a.shadowBlur=1;a.shadowColor="rgba(0,0,0,0.2)";for(var j=0;j<h.length;j++){n[j]=h[j][1]/k;m[j+1]=m[j]+2*n[j]*Math.PI;var o=g(m[j],m[j+1]);a.fillStyle=b[j];a.beginPath();a.moveTo(i.centerx+o.x,i.centery+o.y);a.arc(i.centerx+o.x,i.centery+o.y,i.radiu,m[j],m[j+1]-Math.PI/180*2,false);a.closePath();a.fill();var l=h[j][0]+"("+~~(n[j].toFixed(2)*100)+"%)";f(o.mid,l)}})();function g(k,l){var j=(k+l)/2;return{x:Math.cos(j)*2,y:Math.sin(j)*2,mid:j}}function f(m,n){var l=i.centerx+3*i.radiu/4*Math.cos(m);var k=i.centery+3*i.radiu/4*Math.sin(m);var j=i.centerx+5*i.radiu/4*Math.cos(m);var o=i.centery+5*i.radiu/4*Math.sin(m);a.beginPath();a.strokeStyle="rgba(0,0,0,0.2)";a.lineWidth=1;a.moveTo(l,k);a.lineTo(j,o);a.closePath();a.stroke();a.fillStyle="rgba(0,0,0,0.8)";a.fillText(n,j,o)}};this.drawScatter=function(l){var f={left:40,top:40,width:c.width-80,height:c.height-80,max_x:0,max_y:0,interval_x:0,interval_y:0};var k={};(function(){j();a.clearRect(-400,-400,d.width+400,d.height+400);g(l);m();i(l);h()})();function g(p){k.max_x=p[0][0];k.min_x=p[0][0];k.max_y=p[0][1];k.min_y=p[0][1];for(var o=p.length-1;o>=0;o--){if(p[o][0]>k.max_x){k.max_x=p[o][0]}if(p[o][0]<k.min_x){k.min_x=p[o][0]}if(p[o][1]>k.max_y){k.max_y=p[o][1]}if(p[o][1]<k.min_y){k.min_y=p[o][1]}}}function j(){a.translate(40,d.height-40);a.scale(1,-1)}function h(){a.translate(-40,(d.height-40));a.scale(1,-1)}function m(){a.lineWidth=1;a.beginPath();a.moveTo(0,0);a.lineTo(f.width,0);a.moveTo(0,0);a.lineTo(0,f.height);a.closePath();a.stroke();a.beginPath();a.lineWidth=0.3;for(var o=50;o<f.width;o+=50){a.moveTo(o,0);a.lineTo(o,f.height);f.max_x=o-50}for(var o=50;o<f.height;o+=50){a.moveTo(0,o);a.lineTo(f.width,o);f.max_y=o-50}a.closePath();a.stroke();f.interval_x=Math.ceil(k.max_x/(f.max_x/50));f.interval_y=Math.ceil(k.max_y/(f.max_y/50));a.fillStyle="black";a.scale(1,-1);for(var o=0;o<=f.max_x/50;o++){a.fillText(o*f.interval_x,o*50,20)}for(var o=0;o<=f.max_y/50;o++){a.fillText(o*f.interval_y,-20,-o*50)}a.scale(1,-1)}function i(q){var o={};a.fillStyle="RED";for(var p=0;p<q.length;p++){o=n(q[p][0],q[p][1]);a.beginPath();a.arc(o.x,o.y,3,0,2*Math.PI,true);a.closePath();a.fill()}}function n(o,p){return{x:o/f.interval_x*50,y:p/f.interval_y*50}}this.translateCoord=function(o,p){return{x:Math.round((o-d.left-f.left)*f.interval_x/50),y:Math.round(-(p-d.top-f.top-f.height)*f.interval_y/50)}}};this.drawRadar=function(k){var g=(function(){var m=1;if(d.width>d.height){m=0.35*d.height}else{m=0.35*d.width}var l=~~(m/50);return{centerx:d.width/2,centery:d.height/2,radiu:m,circleNum:l}})();var i={};(function(){f(k);j(k);h(k)})();function h(o){var q=0;var p=0;var r=1;var m=0;var t=g.centerx;var s=g.centery;var l=Math.ceil(i.max/g.circleNum);a.beginPath();for(var n=0;n<o.length;n++){r=o[n][1]*50/l;q=r*Math.cos(m);p=r*Math.sin(m);if(n==0){a.moveTo(t+q,s+p)}else{a.lineTo(t+q,s+p)}m+=i.angle}a.fillStyle="rgba(0,0,255,0.6)";a.fill()}function j(q){var w=g.radiu/g.circleNum;var m=Math.ceil(i.max/g.circleNum);var v=1;var n=0;var D=g.centerx;var B=g.centery;var u=0;var t=0;var C=0;var A=0;var z=0;for(var o=0;o<3;o++){v=50*(o+1);a.strokeStyle="rgba(0,0,0,0.2)";for(var p=0;p<i.angleNum;p++){u=Math.cos(n)*v+D;t=Math.sin(n)*v+B;n+=i.angle;C=Math.cos(n)*v+D;A=Math.sin(n)*v+B;a.beginPath();a.moveTo(u,t);a.lineTo(C,A);a.closePath();a.stroke()}z=m*(o+1);a.fillText(z,D+v-6,B)}n=0;for(var p=0;p<q.length;p++){var l=q[p][0];var s=(v+10)*Math.cos(n);var r=(v+10)*Math.sin(n);a.fillText(l,D+s,B+r);n+=i.angle;a.beginPath();a.moveTo(D,B);a.lineTo(D+v*Math.cos(n),B+v*Math.sin(n));a.closePath();a.stroke()}}function f(n){var o=2*Math.PI/n.length;var l=1;for(var m=0;m<n.length;m++){if(n[m][1]>l){l=n[m][1]}}i.max=l;i.angle=o;i.angleNum=n.length}};this.drawBar=function(l){var g=(function(){return{left:40,top:40,width:c.width-80,height:c.height-80,interval_y:1,max:1,name_num:1,}})();var j={};(function(){a.clearRect(0,0,d.width,d.height);m();h(l);k(l);f(l);i()})();function m(){a.translate(40,d.height-40);a.scale(1,-1)}function i(){a.translate(-40,d.height-40);a.scale(1,-1)}function k(){a.lineWidth=1;a.beginPath();a.moveTo(0,0);a.lineTo(g.width,0);a.moveTo(0,0);a.lineTo(0,g.height);a.closePath();a.stroke();a.scale(1,-1);for(var n=0;n<=g.max/50;n++){a.fillText(n*g.interval_y,-20,-n*50)}a.scale(1,-1)}function f(q){var n=g.width/g.name_num;var p=1;a.strokeStyle="rgba(0,0,0,0.3)";a.lineWidth=2;for(var o=0;o<q.length;o++){a.fillStyle=b[o];p=(q[o][1]/g.interval_y)*50;
a.fillRect(n*o+n*0.2,0,n*0.6,p);a.strokeRect(n*o+n*0.2,0,n*0.6,p)}a.scale(1,-1);a.fillStyle="rgba(0,0,0,0.8)";for(var o=0;o<q.length;o++){p=(q[o][1]/g.interval_y)*50;a.fillText(q[o][0]+"  "+q[o][1],(n*o+n*0.2)+20,-(p+10))}a.scale(1,-1)}function h(p){var n=1;for(var o=0;o<p.length;o++){if(n<p[o][1]){n=p[o][1]}}for(var o=50;o<g.height;o=o+50){g.max=o-50}g.name_num=p.length;j.max=n;g.interval_y=Math.ceil(n/(g.max/50))}}};